# tt-audio-lab 代码规范（v1.1）

## 1. 目标
- 统一代码风格，降低协作成本。
- 提高可维护性与可读性。
- 强制要求：业务代码必须包含中文注释。

## 2. 适用范围
- 前端：`src/` 下的 `ts/vue` 文件。
- Rust：`src-tauri/src/` 下的 `rs` 文件。
- 新增文件与修改文件均适用。

## 3. 中文注释规则（按你确认后的版本）
- `R-001` 以“方法级中文注释”为主，不要求逐行注释。
- `R-002` 关键逻辑行必须有中文注释（例如 IPC、性能关键路径、平台兼容分支）。
- `R-003` 跨模块交互（前端 <-> Rust）必须有中文注释说明数据含义。
- `R-004` 注释必须有信息量，禁止“给变量赋值”这类无效注释。
- `R-005` 代码变更时注释要同步更新，避免注释与行为不一致。

## 4. 推荐注释位置
- 模块入口：模块职责和边界。
- 公开方法：输入/输出、错误处理、副作用。
- 算法与性能段：频谱处理、平滑、降级策略、渲染节流。
- Windows 特定逻辑：窗口模式、点击穿透、托盘行为。

## 5. 提交前检查
- 执行：
```powershell
npm run lint:comment
```
- 检查逻辑：
- 仅对“包含函数定义”的源码文件检查中文注释存在性。
- 不要求每行注释，也不要求纯类型声明文件强制注释。

## 6. PR 检查项
- 方法级中文注释是否完整？
- 关键逻辑是否有中文解释？
- 注释是否与当前实现一致？
